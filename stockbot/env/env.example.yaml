# stockbot/env/env.example.yaml
# Example configuration for Markov-based training pipeline

dataset:
  symbols: ["AAPL", "MSFT", "SPY"]
  start_date: "2015-01-01"
  end_date: "2025-01-01"
  interval: "1d"
  adjusted_prices: true
  lookback: 64
  train_eval_split: "last_year"

features:
  feature_set: ["ohlcv_ta_basic"]
  normalize_observation: true
  embargo_bars: 1

costs:
  commission_per_share: 0.0005
  taker_fee_bps: 1.0
  maker_rebate_bps: -0.2
  half_spread_bps: 0.5
  impact_k: 8.0

execution_model:
  fill_policy: "next_open"
  max_participation: 0.1

cv:
  scheme: "purged_walk_forward"
  n_folds: 6
  embargo_bars: 5

stress_windows:
  - label: "GFC 2008-09"
    start: "2008-07-01"
    end: "2009-06-30"
  - label: "COVID 2020"
    start: "2020-02-01"
    end: "2020-05-31"
  - label: "2022 Tightening"
    start: "2022-01-01"
    end: "2022-10-31"

regime:
  enabled: true
  n_states: 3
  emissions: "gaussian"
  features: ["ret", "vol", "dispersion"]
  append_beliefs_to_obs: true

model:
  policy: "window_cnn"
  total_timesteps: 1000000
  n_steps: 4096
  batch_size: 1024
  learning_rate: 0.00003
  gamma: 0.997
  gae_lambda: 0.985
  clip_range: 0.15
  ent_coef: 0.04
  vf_coef: 1.0
  max_grad_norm: 1.0
  dropout: 0.1

sizing:
  mapping_mode: "simplex_cash"
  invest_max: 0.7
  max_step_change: 0.08
  rebalance_eps: 0.02
  kelly:
    enabled: true
    lambda: 0.5
  vol_target:
    enabled: true
    annual_target: 0.10
  guards:
    daily_loss_limit_pct: 1.0
    per_name_weight_cap: 0.1

reward:
  base: "log_nav"
  w_drawdown: 0.10
  w_turnover: 0.001

artifacts:
  save_tb: true
  save_action_hist: true
  save_regime_plots: true
